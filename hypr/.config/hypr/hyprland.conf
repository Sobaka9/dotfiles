# See https://wiki.hyprland.org/Configuring/Monitors/
# NOTE: Your monitor names (DP-1, DP-2) might be different.
# Run 'hyprctl monitors' in a terminal to find the correct names and update them below.

monitor=DP-2,2560x1440@240,1920x0,auto, bitdepth, 10 # Primary monitor on the right
monitor=DP-4,1920x1080@144,0x180,auto # Secondary monitor on the left

# Set programs that you use
$terminal = alacritty
$fileManager = nemo
$browser = firefox
$menu = wofi --show drun
$codeEditor = codium
$discord = discord

# Execute applications on startup
exec-once = waybar
exec-once = swww-daemon
exec-once = sleep 1 & swww img ~/Pictures/wallpapers/thunderstorm-sea.png
exec-once = xwaylandvideobridge &
exec-once = xrandr --output DP-2 --primary
exec-once = systemctl --user start hyprpolkitagent

# cliphist
exec-once = wl-paste --type text --watch cliphist store # Stores only text data
exec-once = wl-paste --type image --watch cliphist store # Stores only image data

# Start the notification daemon
exec-once = mako
# Set QuadCast RGB color on launch
exec-once = sudo quadcastrgb solid ffffff
# Input mapping
exec-once = input-remapper-control --command stop-all && input-remapper-control --command autoload

# RAIN PARK : 2600287972 | EVENING SHINJUKU : 2582147561 |SEA OF STARS : 2837310594 | CAT PLANET : 2892621110
# WALLPAPER ENGINE : DP-2 | DP-4 | --no--fullscreen-pause
exec-once = ~/Scripts/start-wallpaperengine.sh ~/backgrounds/2837310594/ ~/backgrounds/2892621110/ false

# Some default env vars.
# NOTE: The following lines are for NVIDIA GPUs. You can comment them out if you use AMD or Intel.
env = QT_QPA_PLATFORMTHEME,gtk3
env = WLR_DRM_NO_ATOMIC,1
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = GBM_BACKEND,nvidia-drm
# ---
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = XCURSOR_THEME,Bibata-Modern-Classic
env = XCURSOR_SIZE,24
env = HYPRCURSOR_THEME,Bibata-Modern-Classic
env = HYPRCURSOR_SIZE,64
env = GTK_THEME, Tokyonight-Purple-Dark-Compact-Moon

# For all categories, see https://wiki.hyprland.org/Configuring/Variables/
input {
  kb_layout = us
  kb_variant = intl
  follow_mouse = 1 # 2 means focus on mouse click

  touchpad {
    natural_scroll = no
  }

  tablet {
    output = DP-2
    active_area_size = 100 70
  }
  sensitivity = -0.4 # -1.0 - 1.0, 0 means no modification.
  special_fallthrough = true

}

general {
  # See https://wiki.hyprland.org/Configuring/Variables/ for more
  gaps_in = 5
  gaps_out = 10

  border_size = 2
  col.active_border = rgba(7b2cbfee) rgba(5a189aee) 45deg
  col.inactive_border = rgba(262626ee)

  layout = dwindle

  allow_tearing = false
  hover_icon_on_border = true
}

cursor {
  no_warps = true
}

decoration {
  # See https://wiki.hyprland.org/Configuring/Variables/ for more
  rounding = 10
  
  blur {
    enabled = true
    size = 3
    passes = 6
  }
}

animations {
  enabled = yes

  bezier = defaultBezier, 0.05, 0.9, 0.1, 1.05

  animation = windows, 1, 7, defaultBezier
  animation = windowsOut, 1, 7, default, popin 80%
  animation = border, 1, 10, default
  animation = borderangle, 1, 8, default
  animation = fade, 1, 7, default
  animation = workspaces, 1, 6, defaultBezier
}

dwindle {
  # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
  pseudotile = yes # master switch for pseudotiling.
  preserve_split = yes # you probably want this
}

master {
  # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
  mfact = 0.5
}

misc {
  force_default_wallpaper = -1
  middle_click_paste = false
  on_focus_under_fullscreen = true
}

debug {
    disable_logs = false
}

# See https://wiki.hyprland.org/Configuring/Keywords/ for more
$mainMod = SUPER

# Keybinds
bind = $mainMod, Return, exec, $terminal
bind = $mainMod, C, killactive
bind = $mainMod, mouse:274, killactive
bind = $mainMod, M, exit
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, V, exec, ~/.config/hypr/scripts/toggle_floating.sh
bind = $mainMod SHIFT, H, exec, ~/.config/hypr/scripts/toggle_hdr.sh
bind = $mainMod, R, exec, $menu
bind = $mainMod, P, pseudo # dwindle
bind = $mainMod, T, togglesplit # dwindle
bind = $mainMod, F, fullscreen
bind = $mainMod, D, exec, $discord
bind = $mainMod, B, exec, $browser

bind = $mainMod, X, exec, $discord
bind = $mainMod, X, exec, [workspace 2 silent] $browser
bind = $mainMod, X, exec, steam
bind = $mainMod, X, exec, [workspace 3 silent] $terminal

bind = $mainMod, period, exec, wofi-emoji
bind = $mainMod, G, togglegroup
bind = ALT, Tab, cyclenext
bind = ALT, Tab, bringactivetotop

# Move focus with mainMod + arrow keys or hjkl
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

workspace=1,monitor:DP-4
workspace=2,monitor:DP-4
workspace=3,monitor:DP-4
workspace=4,monitor:DP-4

workspace=5,monitor:DP-2
workspace=6,monitor:DP-2
workspace=7,monitor:DP-2
workspace=8,monitor:DP-2
workspace=9,monitor:DP-2

# --- Standard Workspace Keybinds ---
# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10
# --- End of Workspace Keybinds ---

# Maybe disables middle-click paste?
bindn = , mouse:274, exec, wl-copy -pc

# --- Screenshot Keybinds (requires grim, slurp, and jq) ---
# Screenshot active monitor and copy to clipboard
bind = $mainMod, S, exec, bash -c 'FILEPATH="${HOME}/Pictures/screenshots/SS-$(date +%Y-%m-%d_%H-%M-%S).png"; grim -o "$(hyprctl monitors -j | jq -r ".[] | select(.focused) | .name")" "$FILEPATH" && cat "$FILEPATH" | wl-copy'
# Screenshot a selected region and copy to clipboard
bind = $mainMod SHIFT, S, exec, bash -c 'FILEPATH="${HOME}/Pictures/screenshots/SS-$(date +%Y-%m-%d_%H-%M-%S).png"; grim -g "$(slurp -w 0)" "$FILEPATH" && cat "$FILEPATH" | wl-copy'

# cliphist with wofi
bind = $mainMod SHIFT, V, exec, cliphist list | wofi --dmenu --pre-display-cmd "echo '%s' | cut -f 2" | cliphist decode | wl-copy

# Scroll through existing workspaces with mainMod + scroll
# bind = $mainMod, mouse_down, workspace, e+1
# bind = $mainMod, mouse_up, workspace, e-1
bind = $mainMod, mouse_down, exec, ~/.config/hypr/scripts/workspace_scroll.sh next
bind = $mainMod, mouse_up, exec, ~/.config/hypr/scripts/workspace_scroll.sh prev

# Volume Up
bind = , XF86AudioRaiseVolume, exec, pamixer --increase 5
# Volume Down
bind = , XF86AudioLowerVolume, exec, pamixer --decrease 5
# Mute
bind = , XF86AudioMute, exec, pamixer --toggle-mute

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

layerrule {
  name = layerrule-1
  blur = on
  match:namespace = logout_dialog
}

# Rules for screen sharing
windowrule {
  name = windowrule-1
  opacity = 0.0 override 0.0 override
  no_anim = on
  no_initial_focus = on
  max_size = 1 1
  no_blur = on
  match:class = ^(xwaylandvideobridge)$
}

windowrule {
  name = windowrule-2
  workspace = 1 silent
  opacity = 0.9
  match:class = $discord
}

windowrule {
  name = windowrule-3
  workspace = 6
  match:class = ^($codeEditor|jetbrains-idea)$
}

windowrule {
  name = Steam
  match:class = steam
  workspace = 7 silent
}

windowrule {
  name = fix-steam-float
  match:initial_title = Steam
  match:float = 1

  float = off
  maximize = on
}

windowrule {
  name = windowrule-5
  workspace = 8
  match:class = com.stremio.stremio
}

windowrule {
  name = windowrule-6
  opacity = 1
  match:class = $fileManager
}

windowrule {
  name = jetbrains
  workspace = 6
  no_initial_focus = on
  float = on
  match:class = jetbrains-idea
  match:title = ^win(.*)
}
